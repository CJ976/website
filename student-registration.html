<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Student Registration â€” Hackshala</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root { --page-bg: #0B0F14; }
    html,body { height:100%; font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial; }
    
    /* Smooth transitions for focus and error states */
    input:focus, select:focus, textarea:focus {
      transition: border-color 150ms ease, box-shadow 150ms ease;
    }
    
    /* Custom focus ring for accessibility */
    input:focus:not(:invalid), select:focus:not(:invalid), textarea:focus:not(:invalid) {
      outline: none;
      box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.1), 0 0 12px rgba(6, 182, 212, 0.2);
    }
    
    /* Error state focus */
    input:invalid:focus, select:invalid:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1), 0 0 12px rgba(239, 68, 68, 0.2);
    }
  </style>
</head>
<body style="background:var(--page-bg);" class="antialiased">

  <main class="min-h-screen flex items-center justify-center p-4 sm:p-6">
    <article class="w-full max-w-md">
      
      <!-- Header -->
      <header class="text-center mb-8">
        <div class="flex items-center justify-center gap-2 mb-4">
          <svg class="w-8 h-8 text-cyan-400" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <rect x="2" y="2" width="20" height="20" rx="4" stroke="currentColor" stroke-width="1.2" fill="rgba(34,211,238,0.06)"/>
            <path d="M7 12h10M7 8h6M7 16h4" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
          </svg>
          <div class="text-left">
            <div class="text-white font-bold text-xl">HACK<span class="text-cyan-400">SHALA</span></div>
            <div class="text-xs text-slate-400">Elite Cybersecurity Training</div>
          </div>
        </div>
        
        <h1 class="text-3xl font-bold text-white mb-2">Student Registration</h1>
        <p class="text-slate-400">Join our elite cybersecurity training program</p>
      </header>

      <!-- Registration Form -->
      <section class="bg-slate-900/30 border border-slate-800 rounded-xl p-6 sm:p-8 backdrop-blur-sm">
        
        <form id="registrationForm" class="space-y-5" novalidate>
          
          <!-- Full Name Field -->
          <div class="form-group">
            <label for="fullName" class="block text-sm font-semibold text-slate-200 mb-2">
              Full Name
              <span class="text-red-500" aria-label="required">*</span>
            </label>
            <input
              type="text"
              id="fullName"
              name="fullName"
              placeholder="John Doe"
              required
              maxlength="100"
              class="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 transition hover:border-slate-600 focus:border-cyan-500 focus:ring-0"
              aria-required="true"
              aria-invalid="false"
              aria-describedby="fullName-error"
            />
            <div id="fullName-error" class="mt-1.5 text-xs text-red-400 hidden" role="alert"></div>
          </div>

          <!-- Email Field -->
          <div class="form-group">
            <label for="email" class="block text-sm font-semibold text-slate-200 mb-2">
              Email Address
              <span class="text-red-500" aria-label="required">*</span>
            </label>
            <input
              type="email"
              id="email"
              name="email"
              placeholder="you@example.com"
              required
              class="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 transition hover:border-slate-600 focus:border-cyan-500 focus:ring-0"
              aria-required="true"
              aria-invalid="false"
              aria-describedby="email-error"
            />
            <div id="email-error" class="mt-1.5 text-xs text-red-400 hidden" role="alert"></div>
          </div>

          <!-- Phone Number Field -->
          <div class="form-group">
            <label for="phone" class="block text-sm font-semibold text-slate-200 mb-2">
              Phone Number
              <span class="text-red-500" aria-label="required">*</span>
            </label>
            <input
              type="tel"
              id="phone"
              name="phone"
              placeholder="+1 (555) 000-0000"
              required
              class="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 transition hover:border-slate-600 focus:border-cyan-500 focus:ring-0"
              aria-required="true"
              aria-invalid="false"
              aria-describedby="phone-error"
            />
            <div id="phone-error" class="mt-1.5 text-xs text-red-400 hidden" role="alert"></div>
          </div>

          <!-- Area of Interest Dropdown -->
          <div class="form-group">
            <label for="interest" class="block text-sm font-semibold text-slate-200 mb-2">
              Area of Interest
              <span class="text-red-500" aria-label="required">*</span>
            </label>
            <div class="relative">
              <select
                id="interest"
                name="interest"
                required
                class="w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white transition hover:border-slate-600 focus:border-cyan-500 focus:ring-0 appearance-none cursor-pointer"
                aria-required="true"
                aria-invalid="false"
                aria-describedby="interest-error"
              >
                <option value="" disabled selected>Select your learning path</option>
                <option value="penetration-testing">Penetration Testing</option>
                <option value="network-security">Network Security</option>
                <option value="web-security">Web Application Security</option>
                <option value="red-teaming">Red Teaming</option>
                <option value="blue-teaming">Blue Teaming / SOC</option>
                <option value="cloud-security">Cloud Security Engineer</option>
              </select>
              <!-- Custom dropdown icon -->
              <svg class="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500 pointer-events-none" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
            </div>
            <div id="interest-error" class="mt-1.5 text-xs text-red-400 hidden" role="alert"></div>
          </div>

          <!-- Terms & Conditions -->
          <div class="pt-2">
            <p class="text-xs text-slate-400 leading-relaxed">
              By registering, you agree to our 
              <a href="#" class="text-cyan-400 hover:text-cyan-300 underline">Terms of Service</a> and 
              <a href="#" class="text-cyan-400 hover:text-cyan-300 underline">Privacy Policy</a>. 
              Your data is secure and encrypted.
            </p>
          </div>

          <!-- Submit Button -->
          <button
            type="submit"
            id="submitBtn"
            class="w-full mt-6 px-4 py-2.5 bg-cyan-500 hover:bg-cyan-400 disabled:bg-slate-700 disabled:cursor-not-allowed disabled:text-slate-500 text-slate-900 font-semibold rounded-lg transition focus:outline-none focus:ring-4 focus:ring-cyan-500/30"
            aria-busy="false"
          >
            <span id="submitText">Start Learning</span>
            <svg id="submitSpinner" class="hidden inline-block w-4 h-4 ml-2 animate-spin" viewBox="0 0 24 24" aria-hidden="true">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
          </button>

          <!-- Success Message (hidden by default) -->
          <div id="successMessage" class="hidden p-4 bg-emerald-500/10 border border-emerald-500/30 rounded-lg">
            <p class="text-sm text-emerald-300 font-medium flex items-center gap-2">
              <svg class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              Registration successful! Redirecting...
            </p>
          </div>

        </form>
      </section>

      <!-- Footer -->
      <footer class="text-center mt-6">
        <p class="text-xs text-slate-500">
          Already registered? <a href="watch.html" class="text-cyan-400 hover:text-cyan-300 underline">Go to courses</a>
        </p>
      </footer>

    </article>
  </main>

  <!-- Validation Logic -->
  <script>
    const form = document.getElementById('registrationForm');
    const submitBtn = document.getElementById('submitBtn');
    const fullNameInput = document.getElementById('fullName');
    const emailInput = document.getElementById('email');
    const phoneInput = document.getElementById('phone');
    const interestInput = document.getElementById('interest');

    const fields = [
      { input: fullNameInput, errorId: 'fullName-error', validate: validateFullName },
      { input: emailInput, errorId: 'email-error', validate: validateEmail },
      { input: phoneInput, errorId: 'phone-error', validate: validatePhone },
      { input: interestInput, errorId: 'interest-error', validate: validateInterest }
    ];

    // Validation Functions
    function validateFullName(value) {
      if (!value.trim()) return 'Full name is required';
      if (value.trim().length < 2) return 'Name must be at least 2 characters';
      if (!/^[a-zA-Z\s'-]+$/.test(value)) return 'Name contains invalid characters';
      return '';
    }

    function validateEmail(value) {
      if (!value.trim()) return 'Email address is required';
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(value)) return 'Please enter a valid email address';
      return '';
    }

    function validatePhone(value) {
      if (!value.trim()) return 'Phone number is required';
      const phoneDigits = value.replace(/\D/g, '');
      if (phoneDigits.length < 10) return 'Phone number must have at least 10 digits';
      return '';
    }

    function validateInterest(value) {
      if (!value) return 'Please select an area of interest';
      return '';
    }

    // Show/Hide Error
    function showError(field, errorId, message) {
      const errorElement = document.getElementById(errorId);
      if (message) {
        field.classList.add('border-red-500');
        field.setAttribute('aria-invalid', 'true');
        errorElement.textContent = message;
        errorElement.classList.remove('hidden');
      } else {
        field.classList.remove('border-red-500');
        field.setAttribute('aria-invalid', 'false');
        errorElement.classList.add('hidden');
      }
    }

    // Validate Single Field
    function validateField(field, errorId, validateFn) {
      const error = validateFn(field.value);
      showError(field, errorId, error);
      return !error;
    }

    // Check if entire form is valid
    function isFormValid() {
      return fields.every(({ input, errorId, validate }) => {
        return !validate(input.value);
      });
    }

    // Update button state
    function updateButtonState() {
      submitBtn.disabled = !isFormValid();
    }

    // Add blur listeners for real-time validation
    fields.forEach(({ input, errorId, validate }) => {
      input.addEventListener('blur', () => {
        validateField(input, errorId, validate);
        updateButtonState();
      });

      input.addEventListener('input', () => {
        const error = validate(input.value);
        if (!error) {
          showError(input, errorId, '');
        }
        updateButtonState();
      });
    });

    // Form submission
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Validate all fields
      let isValid = true;
      fields.forEach(({ input, errorId, validate }) => {
        if (!validateField(input, errorId, validate)) {
          isValid = false;
        }
      });

      if (!isValid) {
        // Focus first invalid field
        const firstInvalid = fields.find(({ input }) => input.value === '' || input.getAttribute('aria-invalid') === 'true');
        if (firstInvalid) firstInvalid.input.focus();
        return;
      }

      // Disable button and show loading state
      submitBtn.disabled = true;
      document.getElementById('submitText').classList.add('hidden');
      document.getElementById('submitSpinner').classList.remove('hidden');
      submitBtn.setAttribute('aria-busy', 'true');

      try {
        // Simulate form submission (replace with actual API call)
        await new Promise(resolve => setTimeout(resolve, 1500));

        // Show success message
        form.classList.add('hidden');
        document.getElementById('successMessage').classList.remove('hidden');

        // Store registration in localStorage
        localStorage.setItem('hackshala_registered', 'true');
        localStorage.setItem('hackshala_user_name', fullNameInput.value);
        localStorage.setItem('hackshala_user_email', emailInput.value);
        localStorage.setItem('hackshala_registered_date', new Date().toISOString());

        // Redirect after 2 seconds
        setTimeout(() => {
          window.location.href = 'watch.html?module=redteam';
        }, 2000);

      } catch (error) {
        console.error('Registration error:', error);
        submitBtn.disabled = false;
        document.getElementById('submitText').classList.remove('hidden');
        document.getElementById('submitSpinner').classList.add('hidden');
        submitBtn.setAttribute('aria-busy', 'false');
        alert('An error occurred. Please try again.');
      }
    });

    // Initialize button state
    updateButtonState();

    // Prevent password managers from auto-filling
    fullNameInput.setAttribute('autocomplete', 'given-name');
    emailInput.setAttribute('autocomplete', 'email');
    phoneInput.setAttribute('autocomplete', 'tel');
  </script>

</body>
</html>
